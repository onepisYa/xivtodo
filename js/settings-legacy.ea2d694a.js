(self["webpackChunkxivtodo"]=self["webpackChunkxivtodo"]||[]).push([[571],{1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},4964:function(t,e,n){var r=n(5112),a=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(r){}}return!1}},7007:function(t,e,n){"use strict";n(4916);var r=n(1702),a=n(1320),s=n(2261),i=n(7293),o=n(5112),l=n(8880),c=o("species"),u=RegExp.prototype;t.exports=function(t,e,n,p){var d=o(t),h=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),g=h&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!h||!g||n){var f=r(/./[d]),v=e(d,""[t],(function(t,e,n,a,i){var o=r(t),l=e.exec;return l===s||l===u.exec?h&&!i?{done:!0,value:f(e,n,a)}:{done:!0,value:o(n,e,a)}:{done:!1}}));a(String.prototype,t,v[0]),a(u,d,v[1])}p&&l(u[d],"sham",!0)}},7850:function(t,e,n){var r=n(111),a=n(4326),s=n(5112),i=s("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},3929:function(t,e,n){var r=n(7854),a=n(7850),s=r.TypeError;t.exports=function(t){if(a(t))throw s("The method doesn't accept regular expressions");return t}},7651:function(t,e,n){var r=n(7854),a=n(6916),s=n(9670),i=n(614),o=n(4326),l=n(2261),c=r.TypeError;t.exports=function(t,e){var n=t.exec;if(i(n)){var r=a(n,t,e);return null!==r&&s(r),r}if("RegExp"===o(t))return a(l,t,e);throw c("RegExp#exec called on incompatible receiver")}},9714:function(t,e,n){"use strict";var r=n(1702),a=n(6530).PROPER,s=n(1320),i=n(9670),o=n(7976),l=n(1340),c=n(7293),u=n(7066),p="toString",d=RegExp.prototype,h=d[p],g=r(u),f=c((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),v=a&&h.name!=p;(f||v)&&s(RegExp.prototype,p,(function(){var t=i(this),e=l(t.source),n=t.flags,r=l(void 0===n&&o(d,t)&&!("flags"in d)?g(t):n);return"/"+e+"/"+r}),{unsafe:!0})},7852:function(t,e,n){"use strict";var r=n(2109),a=n(1702),s=n(1236).f,i=n(7466),o=n(1340),l=n(3929),c=n(4488),u=n(4964),p=n(1913),d=a("".endsWith),h=a("".slice),g=Math.min,f=u("endsWith"),v=!p&&!f&&!!function(){var t=s(String.prototype,"endsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!v&&!f},{endsWith:function(t){var e=o(c(this));l(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,a=void 0===n?r:g(i(n),r),s=o(t);return d?d(e,s,a):h(e,a-s.length,a)===s}})},3123:function(t,e,n){"use strict";var r=n(2104),a=n(6916),s=n(1702),i=n(7007),o=n(7850),l=n(9670),c=n(4488),u=n(6707),p=n(1530),d=n(7466),h=n(1340),g=n(8173),f=n(1589),v=n(7651),m=n(2261),b=n(2999),y=n(7293),k=b.UNSUPPORTED_Y,x=4294967295,w=Math.min,_=[].push,C=s(/./.exec),D=s(_),U=s("".slice),S=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));i("split",(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=h(c(this)),i=void 0===n?x:n>>>0;if(0===i)return[];if(void 0===t)return[s];if(!o(t))return a(e,s,t,i);var l,u,p,d=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,b=new RegExp(t.source,g+"g");while(l=a(m,b,s)){if(u=b.lastIndex,u>v&&(D(d,U(s,v,l.index)),l.length>1&&l.index<s.length&&r(_,d,f(l,1)),p=l[0].length,v=u,d.length>=i))break;b.lastIndex===l.index&&b.lastIndex++}return v===s.length?!p&&C(b,"")||D(d,""):D(d,U(s,v)),d.length>i?f(d,0,i):d}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:a(e,this,t,n)}:e,[function(e,n){var r=c(this),i=void 0==e?void 0:g(e,t);return i?a(i,e,r,n):a(s,h(r),e,n)},function(t,r){var a=l(this),i=h(t),o=n(s,a,i,r,s!==e);if(o.done)return o.value;var c=u(a,RegExp),g=a.unicode,f=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(k?"g":"y"),m=new c(k?"^(?:"+a.source+")":a,f),b=void 0===r?x:r>>>0;if(0===b)return[];if(0===i.length)return null===v(m,i)?[i]:[];var y=0,_=0,C=[];while(_<i.length){m.lastIndex=k?0:_;var S,R=v(m,k?U(i,_):i);if(null===R||(S=w(d(m.lastIndex+(k?_:0)),i.length))===y)_=p(i,_,g);else{if(D(C,U(i,y,_)),C.length===b)return C;for(var O=1;O<=R.length-1;O++)if(D(C,R[O]),C.length===b)return C;_=y=S}}return D(C,U(i,y)),C}]}),!S,k)},7079:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return yt}});var r=n(6252),a=n(3577),s=n(9963),i={class:"container"},o=(0,r._)("hr",null,null,-1),l={name:"settings-form",id:"settings-form"},c={class:"row"},u={class:"col-lg-6"},p=(0,r._)("h2",null,"Characters",-1),d=(0,r._)("h3",null,"Add a new character",-1),h={class:"mb-3"},g=(0,r._)("label",{for:"inputCharacterID",class:"form-label"},"Profile URL",-1),f=(0,r._)("div",{class:"form-text"},[(0,r.Uk)(" The URL for your character profile. You can find it in "),(0,r._)("a",{class:"text-reset",href:"https://na.finalfantasyxiv.com/lodestone/character/",target:"_blank",rel:"noopener noreferrer"},"Lodestone"),(0,r.Uk)(". ")],-1),v={key:0,type:"button",id:"settings-save-btn",class:"btn btn-success",disabled:""},m=(0,r._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),b=(0,r.Uk)(" Adding, please wait... "),y=[m,b],k=(0,r._)("br",null,null,-1),x=(0,r._)("br",null,null,-1),w=(0,r._)("h3",null,"Your characters",-1),_={key:2,class:"list-group list-group-flush"},C=(0,r._)("li",{class:"list-group-item d-flex justify-content-between align-items-start"}," Once you add your characters, they will appear here. ",-1),D=[C],U={key:3,class:"list-group list-group-flush"},S={class:"ms-2 me-auto"},R=["src"],O={style:{float:"left"}},L={class:"fw-bold"},A=(0,r._)("br",null,null,-1),E={key:0,class:"text-info fw-light"},$=(0,r._)("div",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),I=(0,r.Uk)(" Updating character data... "),P=[$,I],M={key:1,class:"text-muted fw-light"},T={key:0,class:"text-warning"},V=(0,r._)("br",null,null,-1),W=(0,r._)("abbr",{title:"The achievements for this characters are not set to public in Lodestone."}," Achievements are not public ",-1),Y=[V,W],N=["onClick"],q=(0,r._)("span",{class:"tt-text"},"Update data",-1),z=[q],G=(0,r.Uk)("    "),j=["onClick"],Z=(0,r._)("span",{class:"tt-text"},"Remove character",-1),B=[Z],H=(0,r._)("br",null,null,-1),K={class:"col-lg-6"},F=(0,r._)("h2",null,"General",-1),J=(0,r._)("h3",null,"Content spoilers",-1),Q={class:"form-check"},X=(0,r._)("label",{class:"form-check-label",for:"inputSpoilersOption0"}," Blur out non-completed story-related encounters ",-1),tt={class:"form-check"},et=(0,r._)("label",{class:"form-check-label",for:"inputSpoilersOption1"}," Blur out all story-related encounters ",-1),nt={class:"form-check"},rt=(0,r._)("label",{class:"form-check-label",for:"inputSpoilersOption2"},"Show all encounters",-1),at=(0,r._)("div",{class:"form-text"},"Preference in hiding potential spoilers.",-1),st=(0,r._)("br",null,null,-1),it={key:0,type:"button",id:"settings-save-btn",class:"btn btn-success",disabled:""},ot=(0,r._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),lt=(0,r.Uk)(" Updating, please wait... "),ct=[ot,lt],ut=(0,r._)("br",null,null,-1),pt=(0,r._)("br",null,null,-1);function dt(t,e,n,m,b,C){var $=this,I=(0,r.up)("AlertMsg");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("h1",null,(0,a.zw)(t.$t("page.settings")),1),b.error.msg?((0,r.wg)(),(0,r.j4)(I,{key:0,type:b.error.type,msg:b.error.msg},null,8,["type","msg"])):(0,r.kq)("",!0),o,(0,r._)("form",l,[(0,r._)("div",c,[(0,r._)("div",u,[p,d,(0,r._)("div",h,[g,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return b.profileURL=t}),type:"text",class:"form-control",id:"inputCharacterID",placeholder:"https://na.finalfantasyxiv.com/lodestone/character/12345/"},null,512),[[s.nr,b.profileURL]]),f]),b.adding?((0,r.wg)(),(0,r.iD)("button",v,y)):((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:e[1]||(e[1]=function(){return C.addCharacter&&C.addCharacter.apply(C,arguments)}),type:"button",id:"settings-save-btn",class:(0,a.C_)(["btn btn-success",{disabled:!b.profileURL}])}," Add character ",2)),k,x,w,this.$store.getters.hasCharacter?((0,r.wg)(),(0,r.iD)("ul",U,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.getters.characters,(function(t,e){return(0,r.wg)(),(0,r.iD)("li",{key:t.ID,class:"list-group-item d-flex justify-content-between align-items-start"},[(0,r._)("div",S,[(0,r._)("img",{style:{display:"block",float:"left",height:"50px"},class:"avatar-list",src:t.lodestoneData.Character.Avatar,alt:"Portrait of your character"},null,8,R),(0,r._)("div",O,[(0,r._)("span",L,(0,a.zw)(t.lodestoneData.Character.Name),1),(0,r.Uk)(" – "+(0,a.zw)(t.lodestoneData.Character.World)+" ",1),A,$.updating==t.lodestoneData.Character.ID||$.$store.getters.characterOutOfDate(e)?((0,r.wg)(),(0,r.iD)("span",E,P)):((0,r.wg)(),(0,r.iD)("span",M,[(0,r.Uk)(" Last updated "+(0,a.zw)(C.lastUpdatedAt(t.updated))+" ",1),t.lodestoneData.Achievements&&0!=t.lodestoneData.Achievements.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",T,Y))]))])]),b.updating||$.$store.getters.characterOutOfDate(e)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("a",{key:0,class:"bi-arrow-repeat text-secondary cursor-pointer tt",onClick:function(e){return C.updateCharacter(t.lodestoneData.Character.ID)}},z,8,N)),G,b.updating?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"bi-trash text-danger cursor-pointer tt",onClick:function(t){return C.removeCharacter(e)}},B,8,j))])})),128))])):((0,r.wg)(),(0,r.iD)("ul",_,D)),H]),(0,r._)("div",K,[F,J,(0,r._)("div",Q,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return b.settings.spoilersOption=t}),class:"form-check-input",type:"radio",name:"inputSpoilersOption",id:"inputSpoilersOption0",value:0},null,512),[[s.G2,b.settings.spoilersOption]]),X]),(0,r._)("div",tt,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return b.settings.spoilersOption=t}),class:"form-check-input",type:"radio",name:"inputSpoilersOption",id:"inputSpoilersOption1",value:1},null,512),[[s.G2,b.settings.spoilersOption]]),et]),(0,r._)("div",nt,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return b.settings.spoilersOption=t}),class:"form-check-input",type:"radio",name:"inputSpoilersOption",id:"inputSpoilersOption2",value:2},null,512),[[s.G2,b.settings.spoilersOption]]),rt]),at,st,b.updatingSettings?((0,r.wg)(),(0,r.iD)("button",it,ct)):((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:e[5]||(e[5]=function(){return C.updateSettings&&C.updateSettings.apply(C,arguments)}),type:"button",id:"settings-save-btn",class:"btn btn-success"}," Update settings ")),ut,pt])])])])}var ht=n(4648),gt=(n(1539),n(7852),n(7042),n(4916),n(3123),n(9714),n(6903)),ft=n(9026),vt={name:"SettingsView",data:function(){return{adding:!1,updatingSettings:!1,updating:0,error:{},profileURL:"",settings:(0,ht.Z)({},this.$store.getters.settings)}},components:{AlertMsg:gt.Z},methods:{updateSettings:function(){var t=this;this.updatingSettings=!0,this.error={},(0,ft.VP)(this.settings).then((function(e){t.$store.commit("setSettings",e),t.error={type:"success",msg:"Settings updated!"}})).catch((function(e){t.error={type:"error",msg:"Settings could not be updated: ".concat(e)}})).finally((function(){t.updatingSettings=!1}))},addCharacter:function(){var t=this;this.adding=!0,this.error={},this.profileURL.endsWith("/")&&(this.profileURL=this.profileURL.slice(0,-1));var e=this.profileURL.split("/").slice(-1).pop();(0,ft.y8)(e).then((function(e){t.$store.commit("addCharacter",e),e.lodestoneData.Achievements&&0!=e.lodestoneData.Achievements.length?t.error={type:"success",msg:"Character <b>".concat(e.lodestoneData.Character.Name,"</b> added! You can now access your <a href='/profile' class='alert-link'>Profile</a> and all character completion pages.")}:t.error={type:"warning",msg:"Character <b>".concat(e.lodestoneData.Character.Name,"</b> added, but their achievements are not set to public. You can change that setting <a href='https://na.finalfantasyxiv.com/lodestone/my/setting/account/' class='alert-link' target='_blank' rel='noopener noreferrer'>here</a>, and then update the character's data.")}})).catch((function(e){console.log(e),t.error={type:"error",msg:e.toString()}})).finally((function(){t.profileURL="",t.adding=!1}))},updateCharacter:function(t){var e=this;this.updating=t,this.error={},(0,ft.y8)(t).then((function(t){e.$store.commit("addCharacter",t)})).catch((function(t){console.log(t),e.error={type:"error",msg:t.toString()}})).finally((function(){e.profileURL="",e.updating=null}))},removeCharacter:function(t){var e=this;this.updating=!0,this.error={};var n=this.$store.getters.characters[t].lodestoneData.Character.ID,r=this.$store.getters.characters[t].lodestoneData.Character.Name;(0,ft.cy)(n).then((function(){e.$store.commit("removeCharacter",t),e.error={type:"success",msg:"Character <b>".concat(r,"</b> removed!")}})).catch((function(t){console.log(t),e.error={type:"error",msg:t.toString()}})).finally((function(){e.updating=!1}))},lastUpdatedAt:function(t){var e=new Date/1e3,n=e-t,r=Math.floor(n/2592e3),a=Math.floor(n/86400),s=Math.floor(n/3600),i=Math.floor(n/60);return i<2?"a couple seconds ago":i<120?i+" minutes ago":s<48?s+" hours ago":a<60?a+" days ago":r+" months ago"}}},mt=n(3744);const bt=(0,mt.Z)(vt,[["render",dt]]);var yt=bt}}]);
//# sourceMappingURL=settings-legacy.ea2d694a.js.map