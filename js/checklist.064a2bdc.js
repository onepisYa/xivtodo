"use strict";(self["webpackChunkxivtodo"]=self["webpackChunkxivtodo"]||[]).push([[13],{90:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var i=s(252),l=s(577),o=s(963);const a={class:"container"},c={class:"d-flex align-items-end"},h={class:"me-auto"},n={key:0,class:"fs-3 fw-lighter"},r=(0,i._)("hr",null,null,-1),d={class:"row"},m=(0,i._)("h2",null,"Things to do",-1),u={class:"col-md"},k=(0,i._)("h3",null,"Weeklies",-1),y={class:"fw-lighter text-muted"},g={key:0,class:"input-group mt-3 mb-2"},p={class:"list-group list-group-flush"},w=(0,i._)("br",null,null,-1),D={class:"col-md"},C=(0,i._)("h3",null,"Dailies",-1),f={class:"fw-lighter text-muted"},$={key:0,class:"input-group mt-3 mb-2"},_={class:"list-group list-group-flush"},b=(0,i._)("br",null,null,-1),H={key:1,class:"text-muted fw-light float-end"},x=(0,i.Uk)(" 1 hidden task"),T=(0,i._)("br",null,null,-1),v=(0,i._)("br",null,null,-1),A=[x,T,v],R={key:2,class:"text-muted fw-light float-end"},W=(0,i._)("br",null,null,-1),U=(0,i._)("br",null,null,-1),I={key:2,class:"row"},q={class:"col"},M=(0,i._)("h3",null,"Scratchpad",-1),j=(0,i._)("span",{class:"fw-lighter text-muted"},"Checklist without deadlines",-1),z={key:0,class:"input-group mt-3 mb-2"},N={class:"list-group list-group-flush"},V=(0,i._)("br",null,null,-1);function Y(e,t,s,x,T,v){const Y=(0,i.up)("AlertMsg"),G=(0,i.up)("ChecklistItem");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("h1",c,[(0,i._)("span",h,[(0,i.Uk)((0,l.zw)(e.$t("page.checklist"))+" ",1),this.$store.getters.hasCharacter?((0,i.wg)(),(0,i.iD)("span",n,(0,l.zw)(e.$t("message.forCharacter",{characterName:this.$store.getters.character.Name})),1)):(0,i.kq)("",!0)]),this.$store.getters.hasCharacter?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:(0,l.C_)(["btn float-end",{"btn-outline-success":!T.showHidden,"btn-success":T.showHidden}]),onClick:t[0]||(t[0]=e=>T.showHidden=!T.showHidden)}," Customize ",2)):(0,i.kq)("",!0)]),this.$store.getters.userData?this.$store.getters.hasCharacter?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Y,{key:1,type:"normal",msg:"No characters found. You can add your characters from the <a href='/settings' class='alert-link'>Settings</a>."})):((0,i.wg)(),(0,i.j4)(Y,{key:0,type:"normal",msg:"No characters found. You can <a href='"+this.$store.state.env.VUE_APP_DISCORD_AUTH_URI+"' class='alert-link'>sign in with Discord</a> to add them."},null,8,["msg"])),r,(0,i._)("div",d,[m,(0,i._)("div",u,[k,(0,i._)("span",y,(0,l.zw)(T.weeklyReset)+" until reset",1),T.showHidden?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>T.customWeekly=e),type:"text",class:"form-control",placeholder:"Custom weekly"},null,512),[[o.nr,T.customWeekly]]),(0,i._)("button",{class:(0,l.C_)(["btn btn-outline-success",{disabled:!T.customWeekly}]),type:"button",id:"button-addon2",onClick:t[2]||(t[2]=(...e)=>v.addCustomWeekly&&v.addCustomWeekly(...e))}," Add custom weekly ",2)])):(0,i.kq)("",!0),(0,i._)("ul",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistWeeklies],(e=>((0,i.wg)(),(0,i.j4)(G,{key:e.name,item:e,type:"weekly",showHidden:T.showHidden},null,8,["item","showHidden"])))),128))]),w]),(0,i._)("div",D,[C,(0,i._)("span",f,(0,l.zw)(T.dailyReset)+" until reset",1),T.showHidden?((0,i.wg)(),(0,i.iD)("div",$,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>T.customDaily=e),type:"text",class:"form-control",placeholder:"Custom daily"},null,512),[[o.nr,T.customDaily]]),(0,i._)("button",{class:(0,l.C_)(["btn btn-outline-success",{disabled:!T.customDaily}]),type:"button",id:"button-addon2",onClick:t[4]||(t[4]=(...e)=>v.addCustomDaily&&v.addCustomDaily(...e))}," Add custom daily ",2)])):(0,i.kq)("",!0),(0,i._)("ul",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistDailies],(e=>((0,i.wg)(),(0,i.j4)(G,{key:e.ID,item:e,type:"daily",showHidden:T.showHidden},null,8,["item","showHidden"])))),128))]),b,1==this.$store.getters.checklistLenHiddens?((0,i.wg)(),(0,i.iD)("span",H,A)):this.$store.getters.checklistLenHiddens>1?((0,i.wg)(),(0,i.iD)("span",R,[(0,i.Uk)((0,l.zw)(this.$store.getters.checklistLenHiddens)+" hidden tasks",1),W,U])):(0,i.kq)("",!0)])]),T.showHidden||this.$store.getters.checklistAdhocs.length>0?((0,i.wg)(),(0,i.iD)("div",I,[(0,i._)("div",q,[M,j,T.showHidden?((0,i.wg)(),(0,i.iD)("div",z,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>T.customAdhoc=e),type:"text",class:"form-control",placeholder:"Custom item"},null,512),[[o.nr,T.customAdhoc]]),(0,i._)("button",{class:(0,l.C_)(["btn btn-outline-success",{disabled:!T.customAdhoc}]),type:"button",id:"button-addon2",onClick:t[6]||(t[6]=(...e)=>v.addCustomAdhoc&&v.addCustomAdhoc(...e))}," Add custom item ",2)])):(0,i.kq)("",!0),(0,i._)("ul",N,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistAdhocs],(e=>((0,i.wg)(),(0,i.j4)(G,{key:e.ID,item:e,type:"adhoc",showHidden:T.showHidden},null,8,["item","showHidden"])))),128))]),V])])):(0,i.kq)("",!0)])}var G=s(903);const S={key:0,class:"list-group-item list-group-item-action d-flex justify-content-between align-items-center user-select-none"},K=["id"],L=(0,i.Uk)("   "),Z={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},O={key:0},P=(0,i._)("span",{class:"tt-text"},"Remove",-1),B=[P],E=(0,i._)("span",{class:"tt-text"},"Show",-1),F=[E],J=(0,i._)("span",{class:"tt-text"},"Hide",-1),Q=[J];function X(e,t,s,a,c,h){return(0,i.wg)(),(0,i.iD)(i.HY,null,[c.itemCopy.hidden||s.showHidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("label",S,[(0,i._)("span",null,[!s.showHidden&&this.$store.getters.hasCharacter?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>c.itemCopy.checked=e),class:(0,l.C_)([{"checkbox-checked":c.itemCopy.checked},"form-check-input"]),type:"checkbox",id:s.item.name,onChange:t[1]||(t[1]=(...e)=>h.check&&h.check(...e))},null,42,K)),[[o.e8,c.itemCopy.checked]]):(0,i.kq)("",!0),L,(0,i._)("span",{class:(0,l.C_)({"checklist-checked":c.itemCopy.checked})},(0,l.zw)(s.item.name),3)])])),s.showHidden?((0,i.wg)(),(0,i.iD)("span",Z,[(0,i._)("span",{class:(0,l.C_)([{"text-muted":c.itemCopy.hidden},"user-select-none"])},(0,l.zw)(s.item.name),3),s.showHidden?((0,i.wg)(),(0,i.iD)("span",O,[s.item.custom?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"bi-trash text-danger cursor-pointer tt",onClick:t[2]||(t[2]=(...e)=>h.remove&&h.remove(...e))},B)):c.itemCopy.hidden?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"bi-eye-slash text-secondary cursor-pointer tt",onClick:t[3]||(t[3]=(...e)=>h.hid&&h.hid(...e))},F)):c.itemCopy.hidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:2,class:"bi-eye text-success cursor-pointer tt",onClick:t[4]||(t[4]=(...e)=>h.hid&&h.hid(...e))},Q))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],64)}var ee=s(26),te={data(){return{itemCopy:this.item}},props:{item:Object,type:String,showHidden:Boolean},watch:{item(){this.itemCopy=this.item}},methods:{hid(){this.itemCopy.hidden=!this.itemCopy.hidden,this.updateItem(!1)},check(){this.updateItem(!1)},remove(){this.updateItem(!0)},updateItem(e){if(!this.$store.getters.hasCharacter)return;if("weekly"==this.type){let t=this.$store.getters.checklistWeeklies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistWeeklies",t)}if("daily"==this.type){let t=this.$store.getters.checklistDailies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistDailies",t)}if("adhoc"==this.type){let t=this.$store.getters.checklistAdhocs;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistAdhocs",t)}let t=this.$store.getters.lodestoneData.Character.ID;(0,ee.Ge)(t,this.$store.getters.checklistData)}}},se=s(744);const ie=(0,se.Z)(te,[["render",X]]);var le=ie,oe={name:"ChecklistView",data(){return{showHidden:!1,weeklyReset:this.formatTimeDiff(this.weeklyResetTime(),!0),dailyReset:this.formatTimeDiff(this.dailyResetTime(),!1),customWeekly:"",customDaily:"",customAdhoc:""}},components:{AlertMsg:G.Z,ChecklistItem:le},mounted(){this.$nextTick((function(){this.resetDailliesWeeklies()})),setInterval((()=>{this.resetDailliesWeeklies()}),1e3)},methods:{weeklyResetTime(){let e=new Date,t=new Date;t.setUTCHours(8,0,0),t.setUTCDate(e.getUTCDate()+(9-e.getUTCDay()));let s=t-e,i=6048e5;return s%i+e.getTime()},dailyResetTime(){let e=new Date,t=new Date;t.setUTCHours(15,0,0),t.setUTCDate(t.getUTCDate()+1);let s=t-e,i=864e5;return s%i+e.getTime()},formatTimeDiff(e,t){let s=new Date,i=e-s,l=864e5,o=36e5,a=6e4,c=1e3,h=Math.floor(i/l),n=Math.floor(i/o)-24*Math.floor(i/l),r=Math.floor(i/a)-60*Math.floor(i/o),d=Math.floor(i/c)-60*Math.floor(i/a);return h>0&&t?`${h}d ${n}h`:n>0?`${n}h ${r}m`:`${r}m ${d}s`},resetDailliesWeeklies(){this.weeklyReset=this.formatTimeDiff(this.weeklyResetTime(),!0),this.dailyReset=this.formatTimeDiff(this.dailyResetTime(),!1);let e=!1;if(this.$store.getters.hasCharacter){if(this.$store.getters.checklistNextWeeklyReset<Date.now()){e=!0,this.$store.commit("checklistNextWeeklyReset",this.weeklyResetTime());let t=this.$store.getters.checklistWeeklies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(this.$store.getters.checklistNextDailyReset<Date.now()){e=!0,this.$store.commit("checklistNextDailyReset",this.dailyResetTime());let t=this.$store.getters.checklistDailies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(e){let e=this.$store.getters.lodestoneData.Character.ID;(0,ee.Ge)(e,this.$store.getters.checklistData)}}},addCustomWeekly(){let e={name:this.customWeekly,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistWeeklies];t.push(e),this.$store.commit("setChecklistWeeklies",t),this.customWeekly="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ee.Ge)(s,this.$store.getters.checklistData)},addCustomDaily(){let e={name:this.customDaily,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistDailies];t.push(e),this.$store.commit("setChecklistDailies",t),this.customDaily="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ee.Ge)(s,this.$store.getters.checklistData)},addCustomAdhoc(){let e={name:this.customAdhoc,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistAdhocs];t.push(e),this.$store.commit("setChecklistAdhocs",t),this.customAdhoc="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ee.Ge)(s,this.$store.getters.checklistData)}}};const ae=(0,se.Z)(oe,[["render",Y]]);var ce=ae}}]);
//# sourceMappingURL=checklist.064a2bdc.js.map